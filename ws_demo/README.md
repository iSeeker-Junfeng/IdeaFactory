# WebSocket 音频传输系统

这是一个基于WebSocket的实时音频传输系统，包含一个服务端和两个客户端。

## 功能特性

- **实时音频传输**: 通过WebSocket实现低延迟的音频传输
- **多客户端支持**: 支持多个发送端和接收端同时连接
- **音频录制**: 自动录制麦克风音频
- **音频播放**: 实时播放接收到的音频流
- **连接管理**: 自动处理客户端连接和断开

## 文件说明

- `websocket_server.py` - WebSocket服务端，处理客户端连接和音频转发
- `audio_sender.py` - 发送客户端，录制音频并发送到服务端
- `audio_receiver.py` - 接收客户端，接收音频流并播放
- `requirements.txt` - Python依赖包列表

## 安装依赖

```bash
pip install -r requirements.txt
```

## 使用方法

### 1. 启动服务端

```bash
python websocket_server.py
```

服务端将在 `localhost:8765` 启动，等待客户端连接。

### 2. 启动接收客户端

```bash
python audio_receiver.py
```

接收客户端将连接到服务端并准备接收音频。

### 3. 启动发送客户端

```bash
python audio_sender.py
```

发送客户端将开始录制麦克风音频并发送到服务端。

## 系统架构

```
[发送客户端] --音频数据--> [WebSocket服务端] --音频数据--> [接收客户端]
     ↑                                                           ↓
  录制音频                                                  播放音频
```

## 音频配置

- **采样率**: 44100 Hz
- **声道数**: 1 (单声道)
- **格式**: 16位整数
- **块大小**: 1024 字节

## 注意事项

1. **麦克风权限**: 确保系统允许Python访问麦克风
2. **音频设备**: 确保系统有可用的音频输入和输出设备
3. **网络连接**: 确保客户端能够连接到服务端地址
4. **防火墙**: 如果在不同机器上运行，请检查防火墙设置

## 故障排除

### 常见问题

1. **PyAudio安装失败**
   - Windows: 尝试 `pip install pipwin` 然后 `pipwin install pyaudio`
   - Linux: 安装系统音频库 `sudo apt-get install portaudio19-dev`

2. **无法录制音频**
   - 检查麦克风权限
   - 确认音频设备正常工作
   - 检查音频设备是否被其他程序占用

3. **无法播放音频**
   - 检查扬声器/耳机连接
   - 确认音频输出设备正常工作
   - 检查系统音量设置

4. **连接失败**
   - 确认服务端正在运行
   - 检查网络连接
   - 确认端口8765未被占用

## 扩展功能

- 支持多对多音频传输
- 音频质量调节
- 音频格式转换
- 录制音频到文件
- 音频可视化

## 许可证

MIT License 